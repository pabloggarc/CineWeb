<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seleccionar y Mostrar Imagen</title>
    <script>
        function seleccionarImagen() {
            // Crea un input de tipo file invisible
            var input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';

            // Escucha el cambio en el input para obtener la imagen seleccionada
            input.addEventListener('change', function () {
                var file = input.files[0];
                if (file) {
                    // Lee la imagen como base64
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        var base64Image = e.target.result;

                        // Envía la imagen a la página PHP de muestra
                        enviarImagen(base64Image);
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Activa el input
            input.click();
        }

        function enviarImagen(base64Image) {
            // Crea un formulario dinámico
            var form = document.createElement('form');
            form.method = 'post';
            form.action = 'imagen.php';

            // Crea un campo de entrada oculto para la imagen
            var inputImagen = document.createElement('input');
            inputImagen.type = 'hidden';
            inputImagen.name = 'imagen';
            inputImagen.value = base64Image;

            // Agrega el campo de entrada al formulario
            form.appendChild(inputImagen);

            // Agrega el formulario al cuerpo del documento
            document.body.appendChild(form);

            // Envía el formulario
            form.submit();
        }
    </script>
</head>
<body>
    <h1>Seleccionar y Mostrar Imagen</h1>
    <button onclick="seleccionarImagen()">Seleccionar Imagen</button>
</body>
</html>
